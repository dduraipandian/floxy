<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tree â€” Minimal Docs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">


  <link rel="stylesheet" type="text/css" href="./components/css/__app_root.css">
  <link rel="stylesheet" type="text/css" href="./components/css/__base.css">
  <link rel="stylesheet" type="text/css" href="./components/css/theme/dark.css">
  <link rel="stylesheet" type="text/css" href="./components/css/tree.css">
  <link rel="stylesheet" type="text/css" href="./components/css/doc.css">
</head>

<body class="p-3" style="overflow: auto">
  <div class="container page">
    <div class="header mb-3">
      <h1 class="mb-0">Tree</h1>
      <span class="subtitle">Minimal, interactive folder/tree component</span>
    </div>
    <p class="text-muted mb-3">Lightweight tree view with lazy-loading hooks and a small context menu.</p>

    <div class="card">
      <div class="section-title">Install & Import</div>
      <p class="mb-2">Use as an ES module. Bootstrap CSS/JS already included in this workspace.</p>
      <pre><code>&lt;script type="module"&gt;
import Tree from './components/tree.js';
&lt;/script&gt;
      </code></pre>
    </div>

    <div class="card">
      <div class="section-title">Quick Start</div>
      <pre><code>const sample = [
  { id: 'n0', name: 'Root', children: [ { id: 'n0-1', name: 'Child A', children: [] } ] }
];
const tree = new Tree({ name: 'my-tree', objects: sample });
tree.renderInto('my-tree-container');
      </code></pre>
    </div>

    <div class="card">
      <div class="section-title">Options & API</div>
      <ul class="list-compact">
        <li><strong>objects</strong>: Initial JSON tree array with {id, name, children} nodes.</li>
        <li><strong>data_callback</strong>: Optionally supply a callback to load children lazily.</li>
        <li><strong>renderInto(id)</strong>: Renders the component into a container element.</li>
      </ul>
    </div>

    <hr class="my-4" />
    <h2 class="mt-4">Live Demos</h2>

    <div class="card">
      <div class="d-flex align-items-center justify-content-between">
        <div class="section-title mb-0">Static Tree</div>
        <div class="btn-group d-flex">
          <button class="btn btn-sm btn-primary" id="demo1-show">Render</button>
          <button class="btn btn-sm btn-outline-secondary" id="demo1-clear">Clear</button>
        </div>
      </div>
      <div id="demo1" class="demo-box mt-2">
        <div id="tree-demo1" style="position:relative; min-height: 120px;"></div>
      </div>
    </div>

    <div class="card">
      <div class="d-flex align-items-center justify-content-between">
        <div class="section-title mb-0">Lazy-load Example</div>
        <div class="btn-group d-flex">
          <button class="btn btn-sm btn-primary" id="demo2-show">Render</button>
          <button class="btn btn-sm btn-outline-secondary" id="demo2-clear">Clear</button>
        </div>
      </div>
      <div id="demo2" class="demo-box mt-2">
        <div id="tree-demo2" style="position:relative; min-height: 120px;"></div>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>


  <script type="module">
    import Tree from './components/tree.js';

    const sampleStatic = [
      { id: 'r1', name: 'Root A', children: [
        { id: 'r1-1', name: 'Child A1', children: [] },
        { id: 'r1-2', name: 'Child A2', children: [] }
      ]},
      { id: 'r2', name: 'Root B', children: [
        { id: 'r2-1', name: 'Child B1', children: [] }
      ]}
    ];
    function addMoreData(){
        return [
            { id: 'r3', name: 'Root C', children: [] },
            { id: 'r4', name: 'Root D', children: [] }
        ];
    }    

    // Demo 1: static tree
    let t1 = null;
    document.getElementById('demo1-show').addEventListener('click', () => {
      if (t1 && t1.isRendered && t1.isRendered()) return;
      const contextData = [
            { name: 'Alpha', value: 'A' , callback: (context, node) => { 
                    console.log('Alpha clicked', context); 
                    const data = addMoreData();
                    context.update(node, data);
                } 
            },
            { name: 'Bravo', value: 'B', callback: (context, node) => { console.log('Bravo clicked'); } },
            { name: 'Charlie', value: 'C', callback: (context, node) => { console.log('Charlie clicked'); } },
            { name: ""},
            { name: 'Delta', value: 'D', callback: (context, node) => { console.log('Delta clicked'); } }
        ];
        
      t1 = new Tree({ name: 'demo-tree-1', objects: sampleStatic, options: { contextData: contextData } });
      t1.renderInto('tree-demo1');
    });
    document.getElementById('demo1-clear').addEventListener('click', () => {
      const el = document.getElementById('tree-demo1');
      el.innerHTML = '';
      t1 = null;
    });

    // Demo 2: lazy-load example using data_callback
    const lazyObjects = [ { id: 'L0', name: 'Lazy Root', children: [] } ];
    function fakeLoader(node) {
      // return children for the node (could be a fetch)
      return [
        { id: node.id + '-a', name: node.name + ' - child A', children: [] },
        { id: node.id + '-b', name: node.name + ' - child B', children: [] }
      ];
    }

    let t2 = null;
    document.getElementById('demo2-show').addEventListener('click', () => {
      if (t2 && t2.isRendered && t2.isRendered()) return;
      t2 = new Tree({ name: 'demo-tree-2', objects: lazyObjects, options: { data_callback: fakeLoader } });
      t2.renderInto('tree-demo2');
    });
    document.getElementById('demo2-clear').addEventListener('click', () => {
      const el = document.getElementById('tree-demo2');
      el.innerHTML = '';
      t2 = null;
    });

  </script>

</body>

</html>
