<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Context Menu — Minimal Docs</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

  <link rel="stylesheet" type="text/css" href="./components/css/__app_root.css">
  <link rel="stylesheet" type="text/css" href="./components/css/__base.css">
  <link rel="stylesheet" type="text/css" href="./components/css/theme/dark.css">
  <link rel="stylesheet" type="text/css" href="./components/css/doc.css">
</head>

<body class="p-3" style="overflow: auto">
  <div class="container page">
    <div class="header mb-3">
      <h1 class="mb-0">Context Menu</h1>
      <span class="subtitle">Small context menu built on top of Bootstrap dropdown</span>
    </div>

    <div class="card">
      <div class="section-title">Quick Usage</div>
      <pre><code>&lt;script type="module"&gt;
import ContextMenu from './components/contextmenu.js';
const menu = new ContextMenu({ name: 'Demo Menu' });
menu.renderInto('context-menu-container');
menu.setDropdownItems([{ name: 'One', value: '1' }, { name: 'Two', value: '2' }]);
// In your element's contextmenu handler:
// el.addEventListener('contextmenu', (ev) =&gt; menu.show(ev));
&lt;/script&gt;
      </code></pre>
    </div>

    <div class="card">
      <div class="section-title">Demo: Right-click Area</div>
      <p class="text-muted">Right-click inside the dotted box to open the context menu.</p>
      <div id="context-demo-area" class="mt-2 p-3" style="border: 2px dashed var(--bs-border-color); min-height:120px;">
        Right-click here
      </div>
      <div id="context-menu-container"></div>
    </div>

    <div class="card mt-3">
      <div class="section-title">Demo: Attach to multiple elements</div>
      <p class="text-muted">You can reuse the same menu for multiple targets.</p>
      <div class="d-flex gap-2">
        <div id="target-1" class="p-3 border rounded">Target 1: right-click</div>
        <div id="target-2" class="p-3 border rounded">Target 2: right-click</div>
      </div>
    </div>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>

  <script type="module">
    import ContextMenu from './components/contextmenu.js';

    const menu = new ContextMenu({ name: 'Demo Context Menu', options: { maxHeight: '12em' } });
    menu.renderInto('context-menu-container');

    menu.setDropdownItems([
      { name: 'Refresh', value: 'refresh' },
      { name: 'Rename', value: 'rename' },
      { name: 'Delete', value: 'delete' },
      null,
      { name: 'Properties', value: 'props' }
    ]);

    // Right-click demo area
    const demoArea = document.getElementById('context-demo-area');
    demoArea.addEventListener('contextmenu', (ev) => {
      menu.show(ev);
    });

    // Attach same menu to multiple targets
    ['target-1', 'target-2'].forEach(id => {
      const el = document.getElementById(id);
      el.addEventListener('contextmenu', (ev) => {
        menu.show(ev);
      });
    });

    // Listen to menu item clicks
    menu.on('item:click', (item) => {
      console.log('Context menu clicked:', item);
      // hide menu after click — Bootstrap handles hide on click, but ensure state
      // menu.dropdown.hide(); // optional
      alert(`Clicked: ${item.name} (value=${item.value})`);
    });

  </script>
</body>

</html>
